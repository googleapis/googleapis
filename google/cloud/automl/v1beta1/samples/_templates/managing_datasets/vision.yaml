templates:
- name: AutoML Vision Classification Metatdata (request)
  request:
  - field: dataset.image_classification_dataset_metadata.classification_type
    value: MULTILABEL
    comment: |
      Type of the classification problem.
      MULTICLASS: At most one label is allowed per example.
      MULTILABEL: Multiple labels are allowed for one example.
- name: AutoML Vision Classification Metatdata (response)
  response:
  - comment: "Print image classification type"
  - print:
    - "Image classification dataset metadata type: %s"
    - dataset.image_classification_dataset_metadata.classification_type

samples:
# Create
- region_tag: automl_vision_create_dataset
  mixins:
  - AutoML Create Dataset
  - AutoML Vision Classification Metatdata (request)
  response:
  - include: AutoML Create Dataset
    with:
      dataset:
      - include: AutoML Vision Classification Metatdata (response)
# List
- region_tag: automl_vision_list_datasets
  mixins:
  - AutoML List Datasets
  request:
  - field: filter
    value: "image_classification_dataset_metadata:*"
    comment: |
        An expression for filtering the results of the request.
        This filters for Datasets which have image_classification_dataset_metadata.
  response:
  - include: AutoML List Datasets
    with:
      dataset:
      - include: AutoML Vision Classification Metatdata (response)
# Get
- region_tag: automl_vision_get_dataset
  mixins:
  - AutoML Get Dataset
  response:
  - include: AutoML Get Dataset
    with:
      dataset:
      - include: AutoML Vision Classification Metatdata (response)
# Delete
- region_tag: automl_vision_delete_dataset
  mixins:
  - AutoML Delete Dataset

tests:
- suite: AutoML Vision – Dataset Management
  filename: automl_vision_datasets
  test_template: AutoML Dataset Management Test Suite
  test_data:
    create_dataset_sample: automl_vision_create_dataset
    list_datasets_sample: automl_vision_list_datasets
    get_dataset_sample: automl_vision_get_dataset
    delete_dataset_sample: automl_vision_delete_dataset
    create_dataset_assertions: &assert_classification_type_printed
    - assert_contains:
      - literal: "Image classification dataset metadata type: MULTILABEL"
    list_datasets_assertions: *assert_classification_type_printed
    get_dataset_assertions: *assert_classification_type_printed