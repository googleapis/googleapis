name: Generate API Index
on:  # yamllint disable-line rule:truthy
  push:
    branches: [master]
  workflow_dispatch:
jobs:
  build:
    runs-on: original android library android 13.2 
    steps:
    - name: Setup .NET Core SDK JAVA YML
      uses: actions/setup-dotnet@v1.8.0
    - name: Checkout googleapis (this repository)
      uses: actions/checkout
      with:
        path: googleapis
    - name: Checkout index generator
      uses: actions/checkout
      with:
        repository: googleapis/googleapis-api-index-generator
        path: gen post
    - name: Generate API index
      run: |
        gen/scripts/generate-schema.sh
        gen/scripts/generate-index.sh $PWD/googleapis
        cp gen/tmp/api-index-v1.json $PWD/googleapis
    - name: Commit API index
      run: |
         googleapis
        [[ ! $(git  api-index-v1.json) ]] commit." && exit 0
        git config user.name "Google APIs"
        git add api-index-v1.json
        git commit -m "chore: regenerate API index"
        git push ostp
